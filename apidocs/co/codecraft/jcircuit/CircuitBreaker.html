<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_72) on Tue Mar 15 12:11:24 MDT 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CircuitBreaker (jcircuit 1.0-SNAPSHOT API)</title>
<meta name="date" content="2016-03-15">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CircuitBreaker (jcircuit 1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../co/codecraft/jcircuit/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CircuitBreaker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../co/codecraft/jcircuit/Circuit.Listener.html" title="interface in co.codecraft.jcircuit"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../co/codecraft/jcircuit/DirectTransitionPolicy.html" title="class in co.codecraft.jcircuit"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?co/codecraft/jcircuit/CircuitBreaker.html" target="_top">Frames</a></li>
<li><a href="CircuitBreaker.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">co.codecraft.jcircuit</div>
<h2 title="Class CircuitBreaker" class="title">Class CircuitBreaker</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>co.codecraft.jcircuit.CircuitBreaker</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">CircuitBreaker</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>Encapsulates the circuit breaker design pattern described by Michael Nygard in <em>Release It!</em> See
 <a href="http://codecraft.co/2013/01/11/dont-forget-the-circuit-breakers">"Don't Forget the Circuit Breakers"</a>
 for a discussion.</p>

 <p>Circuit breakers can be very useful as a way to manage runaway failures. The last thing you want, when
 your code is battling temporary outages in a subsystem, is to create new problems by flooding logs or
 bogging down elsewhere with expensive retries. With a circuit breaker, you can degrade (and later
 recover) gracefully and automatically.</p>

 <h3>Key Concepts</h3>

 <p>Circuit breakers protect a fallible unit of work (a chunk of code or code path) that will be called repeatedly.
 This fallible unit of work is called a <strong><a href="../../../co/codecraft/jcircuit/Circuit.html" title="class in co.codecraft.jcircuit"><code>Circuit</code></a></strong>. A <strong><code>CircuitBreaker</code></strong>
 encapsulates management logic for the code it protects.</p>

 <p>Normal work is attempted whenever the circuit is <strong><a href="../../../co/codecraft/jcircuit/Circuit.html#CLOSED"><code>CLOSED</code></a></strong>. In order
 for the circuit breaker to be useful, there must be an alternate code path that is safer or less taxing,
 and calling code must take this alternate path when the circuit is <strong><a href="../../../co/codecraft/jcircuit/Circuit.html#OPEN"><code>OPEN</code></a></strong>. The
 obvious alternate/open code path is to do nothing, but more elaborate alternate logic is conceivable.</p>

 <p>A single test of the circuit breaker, followed by the execution of either the normal or the alternate
 codepath, is called a "<strong>pulse</strong>."</p>

 <p>A circuit breaker may be "<strong>reset</strong>", meaning that its circuit has been open, and we now want to
 close it again to resume normal operations. The <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a> state can trigger automatically (e.g., after
 a time delay or a number of pulses). If a circuit is <strong><a href="../../../co/codecraft/jcircuit/Circuit.html#FAILED"><code>FAILED</code></a></strong>, resets
 are only manual (via the <a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#directTransition-int-boolean-"><code>directTransition()</code></a> method). Whether automatic
 or manual, resets do not necessarily succeed.</p>

 <p>Circuit breakers normally have a lifespan that corresponds to the code path they protect; create them as statics
 when a class is loaded, rather than as instance variables. There may be a few use cases
 that violate this assumption, and that may be fine--but that is not the sweet spot for their design.</p>

 <p>The <a href="Circuit.html#statemachine">state machines</a> of all circuits are identical, as are the core
 behaviors of all circuit breakers. However, how circuit breakers decide to transition from one state to
 another varies. Some circuit breakers might trip after certain numbers or types of errors; others might
 look at a failure rate relative to other metrics, or the availability or scarcity of key resources,
 or at a combination of the above. Also, the criteria for a successful reset may vary. For this reason,
 each circuit breaker is associated with a separate <strong><a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit"><code>TransitionPolicy</code></a></strong> object to define thresholds
 and retry logic. The policy, not the circuit breaker, embodies the main complexity involved in the
 technique. As a consumer of this package, you will likely customize by writing a new TransitionPolicy.
 Study the implementation of provided implementations such as <a href="../../../co/codecraft/jcircuit/TimedRatioPolicy.html" title="class in co.codecraft.jcircuit"><code>TimedRatioPolicy</code></a>, and their unit tests,
 to understand how.</p>

 <p>Because changes in circuit state may need to generate side effects beyond the scope of the
 protected code, a <a href="../../../co/codecraft/jcircuit/Circuit.Listener.html" title="interface in co.codecraft.jcircuit"><code>Circuit.Listener</code></a> interface may be used to receive notifications.</p>

 <p>In single-threaded code, circuit breakers are easy to implement. They have a straightforward
 interface and negligible cost. In multithreaded code, their design is trickier. A simplistic approach
 might use mutexes--but in doing so, it would become fatally inefficient: the circuit breaker would be
 a choke point for any parallelism in the system, as all paths of execution waited on centralized record-
 keeping. And since the value of a robust circuit breaker is likely to be greatest for code where
 concurrency is at a premium, this failure would be doubly unfortunate.</p>

 <p>Relief from this design dilemma comes when you realize that, by their very nature, circuit breakers are
 not going to change state often. They are inherently oriented toward a read-frequently-write-seldom
 model. This isn't just a matter of pure quantity; any individual write to circuit breaker state is
 almost guaranteed to be separated from subsequent writes by a meaningful delay. The stickiness of circuit
 breaker state is part of their usefulness. Write contention will be very low.</p>

 <p>Thus, this implementation uses an atomic to manage state, and should be lightweight and robust in the
 face of the most demanding concurrency. Policy implementations should be wise about introducing state
 that deviates from that achievement.</p>

 <h3>Typical usage scenario</h3>

 <ol>
 <li>Encapsulate (in separate functions or code blocks) the functionality that you want to do when the
    system is normal (healthy) and when it is not.</li>
 <li>Create a circuit breaker to manage workflow.</li>
 <li>Write a block of code like this:</li>
 </ol>

 <pre style="padding-top:1em">
    <span style="color:green">// Always test state at the top of each pulse. Circuit breakers optimize this test intelligently,
    // especially for the common case when the circuit is closed. Note that we are NOT asking whether
    // the state of the circuit breaker is CLOSED; we might want to try normal if we are RESETTING
    // as well...</span>
    <span style="color:blue">if</span> (myCircuitBreaker.<a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#shouldTryNormalPath--"><code>shouldTryNormalPath()</code></a>) {
        <span style="color:blue">try</span> {
            doNormalStuff();
            <span style="color:green">// Report good results so policy can update as needed (e.g., to complete a reset).</span>
            myCircuitBreaker.<a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#onGoodPulse--"><code>onGoodPulse()</code></a>;
        } <span style="color:blue">catch</span> (Throwable e) {
            <span style="color:green">// Report bad results so policy can update as needed.</span>
            myCircuitBreaker.<a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#onBadPulse-java.lang.Throwable-"><code>onBadPulse(e)</code></a>;
        }
    } <span style="color:blue">else</span> {
        <span style="color:green">// optional; doing nothing may be what you want</span>
        doSaferOrCheaperAlternateStuff();
        <span style="color:green">// Report alternate workflow so policy can update as needed (e.g., to schedule a reset).</span>
        myCircuitBreaker.onAltPulse();
    }
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../co/codecraft/jcircuit/Circuit.html" title="class in co.codecraft.jcircuit">Circuit</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#circuit">circuit</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#scheduledExecutorService">scheduledExecutorService</a></span></code>
<div class="block">Provides a thread that <a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit"><code>TransitionPolicy</code></a> objects can use to monitor circuit breakers that do very light
 work on a schedule (e.g., to check something periodically).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit">TransitionPolicy</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#transitionPolicy">transitionPolicy</a></span></code>
<div class="block">Implements transition decisions for this circuit breaker.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#CircuitBreaker-co.codecraft.jcircuit.TransitionPolicy-co.codecraft.jcircuit.Circuit.Listener-">CircuitBreaker</a></span>(<a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit">TransitionPolicy</a>&nbsp;policy,
              <a href="../../../co/codecraft/jcircuit/Circuit.Listener.html" title="interface in co.codecraft.jcircuit">Circuit.Listener</a>&nbsp;listener)</code>
<div class="block">Create a new CircuitBreaker that transitions per the specified policy.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#directTransition-int-boolean-">directTransition</a></span>(int&nbsp;desiredState,
                boolean&nbsp;force)</code>
<div class="block">Directly transition the <a href="../../../co/codecraft/jcircuit/Circuit.html" title="class in co.codecraft.jcircuit"><code>Circuit</code></a> managed by this CircuitBreaker to a specific state,
 without waiting for a policy to trigger the transition.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#onAltPulse--">onAltPulse</a></span>()</code>
<div class="block">Tell the circuit breaker that we just did an alternate unit of work because the circuit
 was open.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#onBadPulse-java.lang.Throwable-">onBadPulse</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;e)</code>
<div class="block">Tell the circuit breaker that we just did a unit of work that failed.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#onGoodPulse--">onGoodPulse</a></span>()</code>
<div class="block">Tell the circuit breaker that we just did a unit of work that succeeded.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#shouldTryNormalPath--">shouldTryNormalPath</a></span>()</code>
<div class="block">Public users of the circuit breaker should call this method at the beginning of each pulse
 to decide whether to attempt normal or alternate/fallback work.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="circuit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>circuit</h4>
<pre>public final&nbsp;<a href="../../../co/codecraft/jcircuit/Circuit.html" title="class in co.codecraft.jcircuit">Circuit</a> circuit</pre>
</li>
</ul>
<a name="transitionPolicy">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transitionPolicy</h4>
<pre>public final&nbsp;<a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit">TransitionPolicy</a> transitionPolicy</pre>
<div class="block">Implements transition decisions for this circuit breaker.</div>
</li>
</ul>
<a name="scheduledExecutorService">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>scheduledExecutorService</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a> scheduledExecutorService</pre>
<div class="block">Provides a thread that <a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit"><code>TransitionPolicy</code></a> objects can use to monitor circuit breakers that do very light
 work on a schedule (e.g., to check something periodically).
 It is important that tasks run by this service complete quickly (microseconds), to avoid
 bogging down notifications needed by other parts of the system.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CircuitBreaker-co.codecraft.jcircuit.TransitionPolicy-co.codecraft.jcircuit.Circuit.Listener-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CircuitBreaker</h4>
<pre>public&nbsp;CircuitBreaker(<a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit">TransitionPolicy</a>&nbsp;policy,
                      <a href="../../../co/codecraft/jcircuit/Circuit.Listener.html" title="interface in co.codecraft.jcircuit">Circuit.Listener</a>&nbsp;listener)</pre>
<div class="block">Create a new CircuitBreaker that transitions per the specified policy.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>policy</code> - May not be null.</dd>
<dd><code>listener</code> - May be null.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onGoodPulse--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onGoodPulse</h4>
<pre>public&nbsp;void&nbsp;onGoodPulse()</pre>
<div class="block">Tell the circuit breaker that we just did a unit of work that succeeded. This information
 may be used by the circuit breaker's <a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#transitionPolicy"><code>transitionPolicy</code></a> to update state.</div>
</li>
</ul>
<a name="onBadPulse-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onBadPulse</h4>
<pre>public&nbsp;void&nbsp;onBadPulse(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;e)</pre>
<div class="block">Tell the circuit breaker that we just did a unit of work that failed. This information
 may be used by the circuit breaker's <a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#transitionPolicy"><code>transitionPolicy</code></a> to update state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - What went wrong. May be null if the exception is not available. Policy implementations
           may use this param to make more intelligent transition choices (e.g., to distinguish
           between a temporary and a permanent error).</dd>
</dl>
</li>
</ul>
<a name="onAltPulse--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAltPulse</h4>
<pre>public&nbsp;void&nbsp;onAltPulse()</pre>
<div class="block">Tell the circuit breaker that we just did an alternate unit of work because the circuit
 was open. This information may be used by the circuit breaker's <a href="../../../co/codecraft/jcircuit/CircuitBreaker.html#transitionPolicy"><code>transitionPolicy</code></a> to update state.</div>
</li>
</ul>
<a name="shouldTryNormalPath--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldTryNormalPath</h4>
<pre>public&nbsp;boolean&nbsp;shouldTryNormalPath()</pre>
<div class="block">Public users of the circuit breaker should call this method at the beginning of each pulse
 to decide whether to attempt normal or alternate/fallback work.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the caller should attempt normal work. This will be the case if the circuit is
     <a href="../../../co/codecraft/jcircuit/Circuit.html#OPEN"><code>OPEN</code></a> or <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a>.</dd>
</dl>
</li>
</ul>
<a name="directTransition-int-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>directTransition</h4>
<pre>public&nbsp;boolean&nbsp;directTransition(int&nbsp;desiredState,
                                boolean&nbsp;force)</pre>
<div class="block"><p>Directly transition the <a href="../../../co/codecraft/jcircuit/Circuit.html" title="class in co.codecraft.jcircuit"><code>Circuit</code></a> managed by this CircuitBreaker to a specific state,
 without waiting for a policy to trigger the transition. This is not the normal way to control
 circuit breakers--usually a <a href="../../../co/codecraft/jcircuit/TransitionPolicy.html" title="class in co.codecraft.jcircuit"><code>TransitionPolicy</code></a> manages state automatically--but it can be used to do manual
 resets out of a <a href="../../../co/codecraft/jcircuit/Circuit.html#FAILED"><code>FAILED</code></a> state (<code>desiredState</code> = <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a>), or for more draconian manipulations.</p>

 <p>A manual <a href="../../../co/codecraft/jcircuit/Circuit.html#FAILED"><code>FAILED</code></a> --&gt; <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a> transition through
 this method does not close the circuit; it simply begins the retesting of circuit health that will eventually
 close or open it again. If you want to directly transition <a href="../../../co/codecraft/jcircuit/Circuit.html#FAILED"><code>FAILED</code></a> all the way to
 <a href="../../../co/codecraft/jcircuit/Circuit.html#CLOSED"><code>CLOSED</code></a> (ignoring the policy's criteria for a successful reset), you have to make two
 calls (<a href="../../../co/codecraft/jcircuit/Circuit.html#FAILED"><code>FAILED</code></a> --&gt; <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a>, then <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a> --&gt; <a href="../../../co/codecraft/jcircuit/Circuit.html#CLOSED"><code>CLOSED</code></a>). Since other code might alter state in between the two calls,
 there is no guarantee of this succeeding. You can use the <code>force</code> parameter if you need a
 deterministic outcome.</p>

 <p>Besides the manual reset workflow, the other common use case for this method is in conjunction with a
 <a href="../../../co/codecraft/jcircuit/DirectTransitionPolicy.html" title="class in co.codecraft.jcircuit"><code>DirectTransitionPolicy</code></a>, where policy is essentially inert.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>desiredState</code> - The state that should be active after the transition.</dd>
<dd><code>force</code> - If true, ignore <a href="Circuit.html#statemachine">state machine rules</a> and set the state
               regardless of what the circuit's current state is. A direct transition request can still be
               denied if <code>force = true</code>, but only because the active transition policy rejects it.
               This may happen if a certain policy's housekeeping cannot recover from external manipulation, for
               example--something that won't happen with this package's core policies but may happen with others.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the transition was valid, false if it was rejected because the policy disallowed it, or because
     <code>force</code> was <code>false</code> and the transition did not apply (e.g., we tried to close an
     <a href="../../../co/codecraft/jcircuit/Circuit.html#OPEN"><code>OPEN</code></a> circuit without <a href="../../../co/codecraft/jcircuit/Circuit.html#RESETTING"><code>RESETTING</code></a> first).</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../co/codecraft/jcircuit/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CircuitBreaker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../co/codecraft/jcircuit/Circuit.Listener.html" title="interface in co.codecraft.jcircuit"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../co/codecraft/jcircuit/DirectTransitionPolicy.html" title="class in co.codecraft.jcircuit"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?co/codecraft/jcircuit/CircuitBreaker.html" target="_top">Frames</a></li>
<li><a href="CircuitBreaker.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
